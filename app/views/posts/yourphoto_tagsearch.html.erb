<% provide(:title, "タグ詳細検索") %>

<% content_for :head do %>
<meta name="turbo-visit-control" content="reload">
<%= javascript_import_module_tag "tagSearch" %>
<% end %>

<input type="hidden" id="json_string" data-array="<%= @json_string %>">

<%= link_to "戻る", "../" , class:"button button_link" %>

<h1>タグ詳細検索</h1>

<div id="container_and" class="container_indent">
    <h2>AND</h2>
    <table class="tag_index_container">
        <tr>
            <th class="tag_index_group">グループ</th>
            <th class="tag_index_tag">タグ</th>
        </tr>
        <% @taggroups.each do |taggroup| %>
            <tr>
                <td class="tag_index_group">
                    <%= taggroup.group %>
                </td>

                <td class="tag_index_tag">
                    <% @tags_included_in_model.where(group:taggroup.id.to_s).each do |tag| %>
                        <input type="button" value="<%= tag.tag %>" class="tag">
                    <% end %>
                </td>
            </tr>
        <% end %>
        <tr>
            <td class="tag_index_group">
                なし
            </td>
            <td class="tag_index_tag">
                <% @tags_included_in_model.where(group:"").each do |tag| %>
                    <input type="button" value="<%= tag.tag %>" class="tag">
                <% end %>
            </td>
        </tr>
    </table>
    <input type="hidden" value="" class="selected_tag_inputted">
</div>



<div id="container_or" class="container_indent">
    <h2>OR</h2>
    <table class="tag_index_container">
        <tr>
            <th class="tag_index_group">グループ</th>
            <th class="tag_index_tag">タグ</th>
        </tr>
        <% @taggroups.each do |taggroup| %>
            <tr>
                <td class="tag_index_group">
                    <%= taggroup.group %>
                </td>

                <td class="tag_index_tag">
                    <% @tags_included_in_model.where(group:taggroup.id.to_s).each do |tag| %>
                        <input type="button" value="<%= tag.tag %>" class="tag">
                    <% end %>
                </td>
            </tr>
        <% end %>
        <tr>
            <td class="tag_index_group">
                なし
            </td>
            <td class="tag_index_tag">
                <% @tags_included_in_model.where(group:"").each do |tag| %>
                    <input type="button" value="<%= tag.tag %>" class="tag">
                <% end %>
            </td>
        </tr>
    </table>
    <input type="hidden" value="" class="selected_tag_inputted">
</div>

<div class="complex_button container_indent">
    <a href="" class="button button_search">検索</a>
    <button class="button button_clear">リセット</button>
</div>
